SHELL=/bin/sh
VPATH=@srcdir@

prog=clicraft

# root for installation
prefix=@prefix@
exec_prefix=@exec_prefix@

# executables
bindir=@bindir@
sbindir=@sbindir@
libexecdir=@libexecdir@

# data
datarootdir=@datarootdir@
datadir=@datadir@
sysconfdir=@sysconfdir@
sharedstatedir=@sharedstatedir@
localstatedir=@localstatedir@

# misc
includedir=@includedir@
oldincludedir=@oldincludedir@
docdir=@docdir@
infodir=@infodir@
libdir=@libdir@
localedir=@localedir@
mandir=@mandir@
man1dir=$(mandir)/man1
man2dir=$(mandir)/man2
man3dir=$(mandir)/man3
man4dir=$(mandir)/man4
man5dir=$(mandir)/man5
man6dir=$(mandir)/man6
man7dir=$(mandir)/man7
man8dir=$(mandir)/man8
man9dir=$(mandir)/man9
manext=.1
srcdir=@srcdir@

INSTALL=install
INSTALL_PROGRAM=$(INSTALL)
INSTALL_DATA=$(INSTALL) -m 644

all:

clean:

installdirs:
	$(INSTALL) -d $(DESTDIR)$(datadir)/$(prog)/bin \
	              $(DESTDIR)$(libdir)/$(prog)/action.d \
	              $(DESTDIR)$(sysconfdir)/$(prog)/action.d \
	              $(DESTDIR)$(bindir)

install: installdirs
	$(INSTALL_PROGRAM) $(srcdir)/src/bin/$(prog) $(DESTDIR)$(datadir)/$(prog)/bin/$(prog)
	$(INSTALL_DATA) $(srcdir)/src/lib/*.sh       $(DESTDIR)$(libdir)/$(prog)/
	$(INSTALL_DATA) $(srcdir)/src/lib/action.d/* $(DESTDIR)$(libdir)/$(prog)/action.d/
	$(INSTALL_DATA) $(srcdir)/src/etc/*.conf     $(DESTDIR)$(sysconfdir)/$(prog)/
	$(INSTALL_DATA) $(srcdir)/src/etc/action.d/* $(DESTDIR)$(sysconfdir)/$(prog)/action.d/
	- ( cd $(DESTDIR)$(bindir); ln -s ../share/$(prog)/bin/$(prog) )
	- ( cd $(DESTDIR)$(datadir)/$(prog); ln -s ../../lib/$(prog) lib; ln -s ../../etc/$(prog) etc; )

uninstall:
	rm     $(DESTDIR)$(bindir)/$(prog)
	rm -rf $(DESTDIR)$(datadir)/$(prog)
	rm -rf $(DESTDIR)$(libdir)/$(prog)/
	#rm -rf $(DESTDIR)$(sysconfdir)/$(prog)/

check:

# automatic re-running of configure if the configure.in file has changed
${srcdir}/configure: configure.in aclocal.m4
	cd ${srcdir} && autoconf

# autoheader might not change config.h.in, so touch a stamp file
${srcdir}/config.h.in: stamp-h.in
${srcdir}/stamp-h.in: configure.in aclocal.m4
		cd ${srcdir} && autoheader
		echo timestamp > ${srcdir}/stamp-h.in

config.h: stamp-h
stamp-h: config.h.in config.status
	./config.status
Makefile: Makefile.in config.status
	./config.status
config.status: configure
	./config.status --recheck

.PHONY: all clean installdirs install uninstall check

